(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f78d105"],{ad69:function(t,i,e){},ad9d:function(t,i,e){"use strict";var a=e("23e7"),n=e("1d80"),l=e("44e7"),r=e("ad6d"),s=e("b622"),o=e("c430"),u=s("replace"),c=RegExp.prototype;a({target:"String",proto:!0},{replaceAll:function t(i,e){var a,s,d,p,f,h,g,m,v,b=n(this);if(null!=i){if(a=l(i),a&&(s=String(n("flags"in c?i.flags:r.call(i))),!~s.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(d=i[u],void 0!==d)return d.call(i,b,e);if(o&&a)return String(b).replace(i,e)}if(p=String(b),f=String(i),""===f)return t.call(p,/(?:)/g,e);if(h=p.split(f),"function"!==typeof e)return h.join(String(e));for(g=h[0],m=g.length,v=1;v<h.length;v++)g+=String(e(f,m,p)),m+=f.length+h[v].length,g+=h[v];return g}})},e8ac:function(t,i,e){"use strict";e("ad69")},f3e4:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("el-upload",{ref:"uploadFile",class:{showMainGraph:t.showMainGraph&&"picture-card"===t.listType,limit:t.limit<=t.fileList.length},attrs:{"on-success":t.handleSuccess,"on-error":t.handleError,action:t.action,"file-list":t.fileList,limit:t.limit,accept:t.accept,multiple:t.multiple,headers:t.headers,"on-preview":t.previewfile,"list-type":t.listType,"before-upload":t.beforeAvatarUpload,"auto-upload":!0},scopedSlots:t._u([{key:"file",fn:function(i){var a=i.file;return"picture-card"===t.listType?e("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:a,list:t.fileList,group:"uid"},expression:"{ item: file, list: fileList, group: 'uid' }"}],key:a.uid,staticClass:"imgItem"},[e("div",{staticClass:"itemcard"},[e("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),t.showMainGraph?e("el-radio",{staticStyle:{height:"20px","line-height":"20px",width:"100%","text-align":"center",color:"#606266",cursor:"pointer"},attrs:{label:a.uid},on:{change:t.sortFormat},model:{value:t.mainGraph,callback:function(i){t.mainGraph=i},expression:"mainGraph"}},[t._v("设为主图")]):t._e(),e("span",{staticClass:"el-upload-list__item-actions"},[e("span",{staticClass:"el-upload-list__item-preview",on:{click:function(i){return t.handlePictureCardPreview(a)}}},[e("i",{staticClass:"el-icon-zoom-in"})]),t.disabled?t._e():e("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){return t.handleDownload(a)}}},[e("i",{staticClass:"el-icon-download"})]),t.disabled?t._e():e("span",{staticClass:"el-upload-list__item-delete",on:{click:function(i){return t.handleRemove(a,t.fileList)}}},[e("i",{staticClass:"el-icon-delete"})])])],1)]):t._e()}}],null,!0)},["picture-card"===t.listType?e("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"}):t._e(),"picture-card"!==t.listType?e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]):t._e(),t.uploadTips?e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.uploadTips))]):t._e()],1),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),e("preview",{attrs:{"dialog-state":t.dialogState}})],1)},n=[],l=e("5530"),r=(e("d3b7"),e("3ca3"),e("ddb0"),e("a9e3"),e("d81d"),e("ac1f"),e("1276"),e("5319"),e("ad9d"),e("4de4"),e("c740"),e("a434"),e("159b"),e("b0c0"),e("2b3d"),e("9861"),e("5f87")),s={name:"UploadImg",components:{preview:function(){return Promise.all([e.e("chunk-002f0ab4"),e.e("chunk-06bc0ee6")]).then(e.bind(null,"59f6"))}},props:{listType:{type:String,default:function(){return"picture-card"}},imgList:{type:Array,default:function(){return[]}},showMainGraph:{type:Boolean,default:function(){return!1}},multiple:{type:Boolean,default:function(){return!0}},limit:{type:Number,default:function(){return 99}},action:{type:String,default:function(){return this.$fileUrl+"/api/v1/file/upload"}},accept:{type:String,default:function(){return".jpg,.gif,.png,.svg,.webp"}},size:{type:Number,default:function(){return 3}},uploadTips:{type:String,default:function(){return""}}},data:function(){return{dialogState:{show:!1,url:""},mainGraph:"",dialogImageUrl:"",dialogVisible:!1,disabled:!1,fileList:[],sizeFlag:!1,changeflag:!0}},computed:{headers:function(){return{token:Object(r["a"])()}}},watch:{imgList:{handler:function(t,i){this.changeflag&&(this.fileList=this.imgList.map((function(t){return{url:t}})))}}},mounted:function(){var t=this;this.fileList=this.imgList.map((function(t,i,e){var a=t.replaceAll("\\","/").split("/");return{url:t,active:!0,name:a[a.length-1]}})),this.$dragging.$on("dragged",(function(i){t.fileList=i.value.list,t.sortFormat()})),this.showMainGraph&&this.$nextTick((function(){t.mainGraph=t.fileList[0].uid}))},methods:{previewfile:function(t){this.dialogState={show:!0,url:t.filePath}},beforeAvatarUpload:function(t){var i=t.size/1024/1024<parseInt(this.size);return i||this.$message.error("上传文件不得大于"+parseInt(this.size)+"MB!"),this.sizeFlag=i,i},handleRemove:function(t,i){var e=this;this.fileList=i.filter((function(i,e){return i.uid!==t.uid})),this.showMainGraph&&t.uid===this.mainGraph&&this.$nextTick((function(){e.mainGraph=e.fileList[0].uid})),this.sortFormat()},handleSuccess:function(t,i,e){var a=[];if(0===t.status)return a=e.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{filePath:t.response.data.natureUrl})})),void this.changes(a);var n=this.$refs.uploadFile.uploadFiles.findIndex((function(t){return t.uid===i.uid}));this.$refs.uploadFile.uploadFiles.splice(n,1),this.$messagee(t.message)},handleError:function(){},changes:function(t){this.sizeFlag&&(this.fileList=t,this.sortFormat())},sortFormat:function(){var t=this;this.changeflag=!1;var i=[];this.fileList.forEach((function(e){e.size?e.uid===t.mainGraph?i.unshift(e.filePath):i.push(e.filePath):e.uid===t.mainGraph?i.unshift(e.url):i.push(e.url)})),this.$emit("update:imgList",i,(function(){t.changeflag=!0}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleDownload:function(t){this.downloadByBlob(t.url,t.name)},downloadByBlob:function(t,i){var e=new Image;e.setAttribute("crossOrigin","anonymous"),e.src=t,e.onload=function(){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height),t.toBlob((function(t){var e=URL.createObjectURL(t),a=document.createElement("a");a.download=i,a.href=e,a.click(),a.remove(),URL.revokeObjectURL(e)}))}}}},o=s,u=(e("e8ac"),e("2877")),c=Object(u["a"])(o,a,n,!1,null,null,null);i["default"]=c.exports}}]);
//# sourceMappingURL=chunk-0f78d105.f8bd0e19.js.map