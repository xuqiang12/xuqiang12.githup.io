(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06bc0ee6"],{2:function(e,t){},3:function(e,t){},"59f6":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"custom_dialog",attrs:{center:"",visible:e.dialogState.show,"append-to-body":"",title:e.title,"custom-class":"fullscreen"===e.ScaleSize?"":"enlarge"},on:{"update:visible":function(t){return e.$set(e.dialogState,"show",t)}}},[i("svg-icon",{staticClass:"scale-icon",attrs:{"icon-class":e.ScaleSize},on:{click:e.ScaleView}}),i("div",{staticClass:"loading"},[!e.placeholderFlag&&e.pathUrl?i("div",{staticClass:"main-content"},["img"===e.fileType?i("div",{staticStyle:{width:"100%",height:"100%","text-align":"center"}},[i("el-image",{staticClass:"imgerror",attrs:{src:e.pathUrl}})],1):"pdf"===e.fileformat?i("embed",{staticStyle:{width:"100%",height:"calc(100% - 5px)"},attrs:{src:e.pathUrl}}):"docx"===e.fileformat?i("div",{staticStyle:{"text-align":"center",height:"100%"}},[i("div",{ref:"docFile",staticClass:"docx-file"})]):"doc"===e.fileformat?i("div",{staticStyle:{"text-align":"center",height:"100%"}},[i("embed",{staticStyle:{width:"100%",height:"calc(100% + 50px)",position:"absolute",top:"-54px",left:"0"},attrs:{id:"pdf-box",src:"https://view.officeapps.live.com/op/view.aspx?src="+e.pathUrl}})]):i("div",{staticStyle:{"text-align":"center"}},[""!==e.placeholderIcon?i("el-image",{staticStyle:{width:"420px",height:"420px"},attrs:{src:e.placeholderIcon}}):e._e(),i("div",{staticStyle:{"text-align":"center",color:"red","font-size":"14px"}},[e._v(" 暂不支持预览文件格式为:"+e._s(e.fileformat)+"的文件, "),i("el-link",{staticStyle:{"font-size":"16px"},attrs:{underline:!1,type:"primary"},on:{click:function(t){return e.downloadByBlob(e.dialogState.url)}}},[e._v("点击下载")])],1)],1)]):i("div",{staticStyle:{width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[""!==e.placeholderIcon?i("el-image",{staticStyle:{width:"420px",height:"420px"},attrs:{src:e.placeholderIcon}}):e._e()],1)])],1)},a=[],o=(i("ac1f"),i("1276"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("bc3a")),c=i.n(o),n=i("376d"),r={props:{title:{type:String,default:function(){return""}},dialogState:{type:Object,default:function(){return{show:!1}}}},data:function(){return{ScaleSize:"fullscreen",loading:!0,pathUrl:"",placeholderIcon:"",placeholderFlag:!1,fileType:"",fileformat:"",changeFlag:0}},watch:{dialogState:{handler:function(e,t){var i=this;if(!this.dialogState.url)return this.dialogState.show=!1,void this.$message.error("预览地址不存在");setTimeout((function(){i.loading.close()}),1e3),this.placeholderIcon="",this.placeholderFlag=!1,this.pathUrl="",this.openFullScreen2(),this.getData(this.dialogState.url)}},deep:!0,immediate:!0},mounted:function(){},methods:{getData:function(e){var t=this;if(this.changeFlag=0,this.fileformat=e.split("?")[0].substring(e.lastIndexOf(".")+1),!e)return this.loading.close(),this.placeholderFlag=!0,void(this.placeholderIcon=i("f679"));c.a.get(e,{url:e,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},responseType:"blob"}).then((function(l){console.log(l);var a=["pdf","docx","doc"],o=["png","jpg","gif","jpeg","webp","bmp","tif","pcx","tga","exif","fpx","svg","psd","cdr","pcd","dxf","ufo","eps","ai","raw","WMF"];if(t.fileType=o.some((function(e){return e===t.fileformat}))?"img":a.some((function(e){return e===t.fileformat}))?"":"other",0===l.data.size)return t.loading.close(),t.placeholderFlag=!0,void(t.placeholderIcon=i("7c0d"));if("other"===t.fileType)return t.placeholderIcon=i("f679"),t.loading.close(),void(t.pathUrl=e);if("doc"===t.fileformat)return t.loading.close(),void(t.pathUrl=e);if("docx"===t.fileformat)return t.loading.close(),c()({method:"get",responseType:"blob",url:e}).then((function(e){var i=e.data;n.renderAsync(i,t.$refs.docFile)})),void(t.pathUrl=e);var r=new Blob([l.data],{type:l.data.type});t.pathUrl=URL.createObjectURL(r),t.loading.close()})).catch((function(e){t.loading.close(),t.placeholderFlag=!0,t.placeholderIcon=i("7c0d"),console.log(e,1111)}))},openFullScreen2:function(){this.loading=this.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:document.querySelector(".loading")})},downloadByBlob:function(e,t){var i=this;0===this.changeFlag?(this.changeFlag=1,setTimeout((function(){i.changeFlag=0}),3e3),c.a.get(e,{url:e,method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:e.data.type});i.pathUrl=URL.createObjectURL(t),window.open(i.pathUrl),i.loading.close()})).catch((function(e){console.log(e)}))):this.$message.error("请勿频繁操作！")},ScaleView:function(){this.ScaleSize="exit-fullscreen"===this.ScaleSize?"fullscreen":"exit-fullscreen"}}},s=r,d=(i("c370"),i("2877")),p=Object(d["a"])(s,l,a,!1,null,"051216dc",null);t["default"]=p.exports},7880:function(e,t,i){},"7c0d":function(e,t,i){e.exports=i.p+"static/img/InvalidFile.07b900bf.png"},c370:function(e,t,i){"use strict";i("7880")},f679:function(e,t,i){e.exports=i.p+"static/img/nofiles.23529bc6.png"}}]);
//# sourceMappingURL=chunk-06bc0ee6.854af881.js.map