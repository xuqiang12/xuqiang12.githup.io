{"version":3,"sources":["webpack:///./src/components/BaseCom/uploadFile.vue?bc19","webpack:///src/components/BaseCom/uploadFile.vue","webpack:///./src/components/BaseCom/uploadFile.vue?1d0b","webpack:///./src/components/BaseCom/uploadFile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$fileUrl","limit","accept","fileList","beforeupload","handlePictureCardPreview","changes","staticClass","slot","dialogVisible","on","$event","dialogImageUrl","staticRenderFns","name","props","imgList","type","default","data","sku_radio","changeflag","watch","mounted","url","methods","setPicList","list","file","filelist","flag","console","arr","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,OAASN,EAAIO,SAAS,uBAAuB,MAAQP,EAAIQ,MAAM,OAASR,EAAIS,OAAO,SAAW,GAAG,YAAYT,EAAIU,SAAS,YAAY,eAAe,gBAAgBV,EAAIW,aAAa,aAAaX,EAAIY,yBAAyB,YAAYZ,EAAIa,QAAQ,YAAYb,EAAIa,QAAQ,eAAc,IAAO,CAACT,EAAG,IAAI,CAACU,YAAY,eAAeR,MAAM,CAAC,KAAO,WAAWS,KAAK,cAAcX,EAAG,YAAY,CAACE,MAAM,CAAC,QAAUN,EAAIgB,eAAeC,GAAG,CAAC,iBAAiB,SAASC,GAAQlB,EAAIgB,cAAcE,KAAU,CAACd,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,OAAO,IAAMN,EAAImB,eAAe,IAAM,SAAS,IACjrBC,EAAkB,GC2BP,G,wCAAA,CACfC,oBACAC,OACAC,SACAC,WACAC,mBACA,WAGAjB,OACAgB,YACAC,mBACA,YAGAhB,QACAe,YACAC,mBACA,qCAIAC,KAtBA,WAuBA,OACAC,aACAR,kBACAH,iBACAN,YACAkB,gBAGAC,SAUAC,QAzCA,WA0CA,mDAAAC,WAEAC,SACAC,WADA,SACAC,GACA,wCAAAH,WAEApB,aAJA,SAIAwB,EAAAC,EAAAC,GACAC,mBACA,oBACA,mBAGA,GACA,mCAHA,GAQAzB,QAhBA,SAgBAsB,EAAAzB,GAAA,WACA,mCAGA4B,4CAEAA,iBACA,mBACA,gBACA,SACA,mCACA,OACA,mBACAC,mBAEA,+BAGAA,iBAGA,0CACA,qBAGA3B,yBAzCA,SAyCAuB,GACA,0BACA,0BCnHmW,I,YCO/VK,EAAY,eACd,EACAzC,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAoB,E","file":"static/js/chunk-2d0f02c8.9514a536.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":_vm.$fileUrl+'/api/file/uploadfile',\"limit\":_vm.limit,\"accept\":_vm.accept,\"multiple\":\"\",\"file-list\":_vm.fileList,\"list-type\":\"picture-card\",\"before-upload\":_vm.beforeupload,\"on-preview\":_vm.handlePictureCardPreview,\"on-change\":_vm.changes,\"on-remove\":_vm.changes,\"auto-upload\":true}},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n * @Description: 上传\n * @Author: 编辑人\n * @Date: 2021-08-09 11:40:56\n-->\n<template>\n  <div>\n    <el-upload\n      :action=\"$fileUrl+'/api/file/uploadfile'\"\n      :limit=\"limit\"\n      :accept=\"accept\"\n      multiple\n      :file-list=\"fileList\"\n      list-type=\"picture-card\"\n      :before-upload=\"beforeupload\"\n      :on-preview=\"handlePictureCardPreview\"\n      :on-change=\"changes\"\n      :on-remove=\"changes\"\n      :auto-upload=\"true\"\n    >\n      <i slot=\"default\" class=\"el-icon-plus\" />\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"TableElement\",\n  props: {\n    imgList: { // 回显图片地址数组\n      type: Array,\n      default: function() {\n        return [];\n      }\n    },\n    limit: { // 上传最大数量\n      type: Number,\n      default: function() {\n        return 99;\n      }\n    },\n    accept: { // 能上传的文件格式\n      type: String,\n      default: function() {\n        return \".jpg,.gif,.png,.svg,.webp\";\n      }\n    },\n  },\n  data() {\n    return {\n      sku_radio: \"\",\n      dialogImageUrl: '',\n      dialogVisible: false,\n      fileList: [],\n      changeflag: true\n    }\n  },\n  watch: {\n    // imgList: { // 当数据发生改变时，会自动去计算\n    //   handler(newValue, oldValue) {\n    //     console.log(this.changeflag)\n    //     if (this.changeflag) {\n    //       this.fileList = this.imgList.map(item => ({ url: item, }));\n    //     }\n    //   }\n    // },\n  },\n  mounted() {\n    this.fileList = this.imgList.map(item => ({ url: item, }));\n  },\n  methods: {\n    setPicList(list) {\n      this.fileList = list.map(item => ({ url: item, }));\n    },\n    beforeupload(file, filelist, flag) {\n      console.log(file, filelist, flag)\n      const size = file.size / 1024 < 1;\n      if (flag === 'adopt') {\n        return size\n      }\n      if (!size) {\n        this.$message.error('上传文件不得大于' + 'MB!');\n      }\n      // this.sizeFlag = size\n      return size;\n    },\n    changes(file, fileList) {\n      if (!this.beforeupload(file, fileList, 'adopt')) {\n        return\n      }\n      console.log(this.beforeupload(file, fileList, 'adopt'))\n\n      console.log(111)\n      this.changeflag = false\n      this.fileList = fileList\n      const arr = []\n      this.fileList.forEach(element => {\n        if (element.size) {\n          if (element.size / 1024 / 1024 < 5) {\n            arr.push(element.response)\n          } else {\n            this.$message.error('上传文件不得大于5M')\n          }\n        } else {\n          arr.push(element.url)\n        }\n      });\n      this.$emit('update:imgList', arr, () => {\n        this.changeflag = true\n      })\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uploadFile.vue?vue&type=template&id=c3c78548&scoped=true&\"\nimport script from \"./uploadFile.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3c78548\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}